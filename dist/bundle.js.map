{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack:///./js/script.js","webpack:///./js/modules/tabs.js","webpack:///./js/modules/timer.js","webpack:///./js/modules/cards.js","webpack:///./js/modules/slider.js","webpack:///./js/modules/calc.js","webpack:///./js/modules/forms.js"],"sourcesContent":["import tabs from './modules/tabs';\nimport timer from './modules/timer';\nimport cards from './modules/cards';\nimport slider from './modules/slider';\nimport calc from './modules/calc';\nimport forms from './modules/forms';\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  tabs();\n  timer('2023-09-14'); //окончание акции в часовом поясе UTC\n  cards(101); // курс рублей к доллару\n  slider();\n  calc();\n  forms();\n});\n","export default function tabs() {\n  const tabs = document.querySelectorAll('.tabheader__item'),\n    tabsContent = document.querySelectorAll('.tabcontent'),\n    tabsParent = document.querySelector('.tabheader__items');\n\n  function hideTabContent() {\n    tabsContent.forEach((item) => {\n      item.classList.remove('show', 'fade');\n      item.classList.add('hide');\n    });\n    tabs.forEach((item) => {\n      item.classList.remove('tabheader__item_active');\n    });\n  }\n\n  function showTabContent(i = 0) {\n    tabsContent[i].classList.remove('hide');\n    tabsContent[i].classList.add('show', 'fade');\n    tabs[i].classList.add('tabheader__item_active');\n  }\n\n  hideTabContent();\n  showTabContent();\n\n  tabsParent.addEventListener('click', (event) => {\n    if (event.target?.classList.contains('tabheader__item')) {\n      tabs.forEach((item, i) => {\n        if (event.target == item) {\n          hideTabContent();\n          showTabContent(i);\n        }\n      });\n    }\n  });\n}\n","export default function timer(deadline) {\n  \n  const promotionDeadline = document.querySelector('#promotion__deadline');\n  promotionDeadline.textContent = ' ' + new Date(deadline).toLocaleDateString();\n\n  function getTimeRemaining(endtime) {\n    const s1 = Date.parse(endtime) / 1000, //дедлайн в сек\n      d = new Date(),\n      s2 = Date.parse(d) / 1000, //сегодня в сек\n      s3 = 60 * d.getTimezoneOffset(), //коррекция часового пояса секунд\n      t = s1 - s2 + s3; //секунд осталось с коррекцией пояса, тогда совпадёт с локальной полночью\n\n    if (t <= 0)\n      return {\n        total: 0,\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0,\n      };\n\n    const secs = Math.floor(t % 60), //остаток секунд\n      mins = Math.floor((t / 60) % 60), //остаток минут\n      hours = Math.floor((t / 60 / 60) % 24), //остаток часов\n      days = Math.floor(t / 60 / 60 / 24); //полных дней\n\n    return {\n      total: t,\n      days: days,\n      hours: hours,\n      minutes: mins,\n      seconds: secs,\n    };\n  }\n\n  function getZero(num) {\n    if (num >= 0 && num < 10) {\n      return `0${num}`;\n    } else return num;\n  }\n\n  function setClock(selector, endtime) {\n    const timer = document.querySelector(selector),\n      days = timer.querySelector('#days'),\n      hours = timer.querySelector('#hours'),\n      minutes = timer.querySelector('#minutes'),\n      seconds = timer.querySelector('#seconds'),\n      timeInterval = setInterval(updateClock, 1000); //назначили таймер\n\n    updateClock();\n\n    function updateClock() {\n      const t = getTimeRemaining(endtime);\n      days.textContent = getZero(t.days);\n      hours.textContent = getZero(t.hours);\n      minutes.textContent = getZero(t.minutes);\n      seconds.textContent = getZero(t.seconds);\n\n      if (t.total <= 0) {\n        clearInterval(timeInterval); // сняли таймер\n      }\n    }\n  }\n\n  setClock('.timer', deadline);\n}\n","export default function cards(transferRate) {\n\n  class MenuCard {\n    constructor(src, alt, title, descr, price, parentSelector) {\n      this.src = src;\n      this.alt = alt;\n      this.title = title;\n      this.descr = descr;\n      this.price = price * +transferRate; // изначально в долларах\n      this.parent = document.querySelector(parentSelector);\n    }\n\n    render() {\n      const element = document.createElement('div');\n      element.innerHTML = `\n          <div class=\"menu__item\">\n                        <img src=${this.src} alt=${this.alt}>\n                        <h3 class=\"menu__item-subtitle\">${this.title}</h3>\n                        <div class=\"menu__item-descr\">${this.descr}</div>\n                        <div class=\"menu__item-divider\"></div>\n                        <div class=\"menu__item-price\">\n                            <div class=\"menu__item-cost\">Цена:</div>\n                            <div class=\"menu__item-total\"><span>${this.price}</span> руб/день</div>\n                        </div>\n          `;\n      this.parent.append(element);\n    }\n  }\n\n  const getRes = async (url) => {\n    const res = await fetch(url);\n    if (!res.ok) {\n      throw new Error(`ERROR GET fetch ${url} status ${res.status}`);\n    }\n    return await res.json();\n  };\n\n  getRes('http://localhost:3000/menu').then((data) => {\n    data.forEach(({ img, altimg, title, descr, price }) => {\n      new MenuCard(\n        img,\n        altimg,\n        title,\n        descr,\n        price,\n        '.menu .container'\n      ).render();\n    });\n  });\n}\n","export default function slider() {\n  // slider\n  const slides = document.querySelectorAll('.offer__slide'),\n    prev = document.querySelector('.offer__slider-prev'),\n    next = document.querySelector('.offer__slider-next'),\n    total = document.querySelector('#total'),\n    current = document.querySelector('#current');\n\n  let slideIndex = 1;\n\n  if (slides.length < 10) total.textContent = `0${slides.length}`;\n  else total.textContent = `${slides.length}`;\n\n  showSlide(slideIndex);\n  prev.addEventListener('click', () => showSlide(--slideIndex));\n  next.addEventListener('click', () => showSlide(++slideIndex));\n\n  function showSlide(n) {\n    if (n < 1) slideIndex = slides.length;\n    if (n > slides.length) slideIndex = 1;\n    slides.forEach((slide) => (slide.style.display = 'none'));\n    slides[slideIndex - 1].style.display = 'block';\n    if (slideIndex < 10) current.textContent = `0${slideIndex}`;\n    else current.textContent = `${slideIndex}`;\n  }\n}\n","export default function calc() {\n  // Calc\n  const result = document.querySelector('.calculating__result span');\n  let height,\n    weight,\n    age,\n    sex = document.querySelector('#gender .calculating__choose-item_active').id,\n    ratio = +document\n      .querySelector(\n        '.calculating__choose_big .calculating__choose-item_active'\n      )\n      .getAttribute('data-ratio');\n\n  function calcTotal() {\n    if (sex == 'female')\n      result.textContent = Math.floor(\n        ratio * (447 + weight * 9 + height * 3 - age * 4)\n      );\n    else\n      result.textContent = Math.floor(\n        ratio * (88 + weight * 13 + height * 5 - age * 6)\n      );\n    if (result.textContent == 'NaN') result.textContent = '____';\n  }\n  calcTotal();\n\n  function getStaticInfo(selector) {\n    const elements = document.querySelectorAll(selector);\n    elements.forEach((elem) => {\n      elem.addEventListener('click', (e) => {\n        if (e.target.getAttribute('data-ratio')) {\n          ratio = +e.target.getAttribute('data-ratio');\n        } else {\n          sex = e.target.getAttribute('id');\n        }\n        elements.forEach((el) => {\n          el.classList.remove('calculating__choose-item_active');\n        });\n        e.target.classList.add('calculating__choose-item_active');\n        calcTotal();\n      });\n    });\n  }\n  getStaticInfo('.calculating__choose_big div');\n  getStaticInfo('#gender div');\n\n  function getDynamicInfo(selector) {\n    const input = document.querySelector(selector);\n    input.addEventListener('input', () => {\n      if (input.value.match(/\\D/) || input.value < 1) {\n        input.style.border = '2px solid red';\n      } else input.style.border = '';\n      switch (input.getAttribute('id')) {\n        case 'height':\n          height = +input.value;\n          break;\n        case 'weight':\n          weight = +input.value;\n          break;\n        case 'age':\n          age = +input.value;\n          break;\n      }\n      calcTotal();\n    });\n  }\n  getDynamicInfo('#height');\n  getDynamicInfo('#weight');\n  getDynamicInfo('#age');\n}\n","export default function forms() {\n\n  // modal\n  \n  const modal = document.querySelector('.modal');\n\n  function openModal() {\n    modal.classList.remove('hide');\n    modal.classList.add('show');\n    document.body.style.overflow = 'hidden';\n  }\n  \n  function closeModal() {\n    modal.classList.remove('show');\n    modal.classList.add('hide');\n    document.body.style.overflow = '';\n  }\n  \n    const modalTrigger = document.querySelectorAll('[data-modal]');\n  \n    modalTrigger.forEach((btn) => {\n      btn.addEventListener('click', () => {\n        openModal();\n      });\n    });\n  \n    modal.addEventListener('click', (e) => {\n      if (e.target === modal || e.target.getAttribute('data-close') === '') {\n        closeModal();\n      }\n    });\n  \n    document.addEventListener('keydown', (e) => {\n      if (e.code == 'Escape' && modal.classList.contains('show')) {\n        closeModal();\n      }\n    });\n  \n  function showThanksModal(message) {\n    const prevModalDialog = document.querySelector('.modal__dialog');\n    prevModalDialog.classList.add('hide');\n    openModal();\n  \n    const thanksModal = document.createElement('div');\n    thanksModal.classList.add('modal__dialog');\n    thanksModal.innerHTML = `\n  <div class='modal__content'>\n    <div class=\"modal__close\" data-close>&times;</div>\n    <div class=\"modal__title\">${message}</div>\n  </div>\n  `;\n    document.querySelector('.modal').append(thanksModal);\n    setTimeout(() => {\n      thanksModal.remove();\n      prevModalDialog.classList.add('show');\n      prevModalDialog.classList.remove('hide');\n      closeModal();\n    }, 4000);\n  }\n  \n// forms\n\n  const forms = document.querySelectorAll('form');\n  const message = {\n    success: 'Спасибо! Данные отправлены успешно.',\n    failure: 'Что-то пошло не так (',\n  };\n\n  forms.forEach((item) => {\n    bindPostData(item);\n  });\n\n  function bindPostData(form) {\n    form.addEventListener('submit', (e) => {\n      e.preventDefault();\n\n      const postData = async (url, data) => {\n        const res = await fetch(url, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: data,\n        });\n        if (!res.ok) {\n          throw new Error(`ERROR POST fetch ${url} status ${res.status}`);\n        }\n        return await res.json();\n      };\n\n      const formData = new FormData(form);\n      const json = JSON.stringify(Object.fromEntries(formData.entries()));\n\n      postData('http://localhost:3000/requests', json)\n        .then((data) => {\n          console.log(data);\n          showThanksModal(message.success);\n          // statusMessage.remove();\n        })\n        .catch(() => {\n          showThanksModal(message.failure);\n        })\n        .finally(() => {\n          form.reset();\n        });\n    });\n  } // bindPostData\n}\n"],"names":["window","addEventListener","tabs","document","querySelectorAll","tabsContent","tabsParent","querySelector","hideTabContent","forEach","item","classList","remove","add","showTabContent","i","event","target","contains","deadline","getZero","num","textContent","Date","toLocaleDateString","selector","endtime","timer","days","hours","minutes","seconds","timeInterval","setInterval","updateClock","t","s1","parse","d","getTimezoneOffset","total","secs","Math","floor","mins","getTimeRemaining","clearInterval","setClock","transferRate","MenuCard","constructor","src","alt","title","descr","price","parentSelector","this","parent","render","element","createElement","innerHTML","append","async","url","res","fetch","ok","Error","status","json","getRes","then","data","img","altimg","cards","slides","prev","next","current","slideIndex","showSlide","n","length","slide","style","display","slider","result","height","weight","age","sex","id","ratio","getAttribute","calcTotal","getStaticInfo","elements","elem","e","el","getDynamicInfo","input","value","match","border","calc","modal","openModal","body","overflow","closeModal","showThanksModal","message","prevModalDialog","thanksModal","setTimeout","btn","code","form","preventDefault","formData","FormData","method","headers","postData","JSON","stringify","Object","fromEntries","entries","console","log","catch","finally","reset"],"sourceRoot":""}